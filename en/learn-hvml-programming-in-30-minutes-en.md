# Learn HVML Programming in 30 Minutes

-- Vincent Wei

**Table of Contents**

[//]:# (START OF TOC)


[//]:# (END OF TOC)

## Article Info

## Abstract

Now, we hope that our HVML program can generate a HTML file instead of
printing to the terminal. For this purpose, we enhance `hello-10.hvml` once more:

```hvml
<!DOCTYPE hvml>
<hvml target="html">
    <head>
        <title>Hello, world!</title>
    <head>

    <body>
        <ul>
            <iterate on 0 onlyif $L.lt($0<, 10) with $EJSON.arith('+', $0<, 1) >
                <li>$?) Hello, world! --from COROUTINE-$CRTN.cid</li>
            </iterate>
        </ul>
    </body>
</hvml>
```

and save the contents in `hello-html.hvml` file. Note that there are two key
differences:

1. The value of `target` attribute of `hvml` element changed to `html`.
1. We used HTML tags such as `head`, `body`, `ul`, and `li` directly in
   the HVML program.

If you run `hello-html.hvml` program by using `purc` without any option, `purc`
will use the renderer called `HEADLESS`. This renderer will record the messages
sent by PurC to the renderer to a local file. Because this revised HVML program
did not use `$STREM.stdout` any more, you will see nothing on your terminal.
But you can use the option `--verbose` (or the short option `-b`) to show the
HTML contents generated by the HVML program in your terminal:

```bash
    $ purc -b hello-html.hvml
```

The command will give you the following output:

```
purc 0.8.0
Copyright (C) 2022 FMSoft Technologies.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Executing HVML program from `file:///srv/devel/hvml/purc/build/hvml/hello-html.hvml`...

>> The document generated:
<html>
  <head>
    <title>
      Hello, world!
    </title>
  </head>
  <body>
    <ul>
      <li>
        0) Hello, world! --from COROUTINE-3
      </li>
      <li>
        1) Hello, world! --from COROUTINE-3
      </li>
      <li>
        2) Hello, world! --from COROUTINE-3
      </li>
      <li>
        3) Hello, world! --from COROUTINE-3
      </li>
      <li>
        4) Hello, world! --from COROUTINE-3
      </li>
      <li>
        5) Hello, world! --from COROUTINE-3
      </li>
      <li>
        6) Hello, world! --from COROUTINE-3
      </li>
      <li>
        7) Hello, world! --from COROUTINE-3
      </li>
      <li>
        8) Hello, world! --from COROUTINE-3
      </li>
      <li>
        9) Hello, world! --from COROUTINE-3
      </li>
    </ul>
  </body>
</html>


>> The execute result:
null
```

However, we need to enhace the HVML program once more, in order that the program
will not exit immediately after generated the HTML contents. Otherwise,
the window created by xGUI Pro for this HVML program will disappeared
after `purc` exited.

We enhance `hello-html.hvml` to install a timer and update the document and
save it as `hello-html-timer.hvml`:

```hvml
<!DOCTYPE hvml>
<hvml target="html">
    <head>
        <title>My First HVML Program</title>

        <update on="$TIMERS" to="unite">
            [
                { "id" : "clock", "interval" : 500, "active" : "yes" },
            ]
        </update>
    </head>

    <body>
        <h1>My First HVML Program</h1>
        <p>Current Time: <span id="clock">$DATETIME.time_prt()</span></p>

        <ul>
            <iterate on 0 onlyif $L.lt($0<, 10) with $EJSON.arith('+', $0<, 1L) nosetotail >
                <li>$<) Hello, world! --from COROUTINE-$CRTN.cid</li>
            </iterate>
        </ul>

        <observe on $TIMERS for "expired:clock">
            <update on "#clock" at "textContent" to "displace" with "$DATETIME.time_prt()" />
        </observe>

        <observe on $CRTN for "rdrState:closed">
            <exit with "closed" />
        </observe>

    </body>
</hvml>
```

